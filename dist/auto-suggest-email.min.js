/*!
 * auto-suggest-email v0.1.0 (https://github.com/Fetten/auto-suggest-email)
 * Copyright 2015 Marcel Fetten <fetten@fetten-meier.com>
 * Licensed under the MIT license
 */

var autoSuggestEmail;autoSuggestEmail=function(a,b){"use strict";function c(){var a=g.listContainer.querySelectorAll("li");d(a[0],"is-highlighted");var b;for(b=0;b<a.length;b+=1)a[b].style.cursor="pointer",a[b].addEventListener("click",function(){g.inputElement.value=this.textContent,g.listContainer.style.display="none"},!1),a[b].addEventListener("mouseenter",function(){for(b=0;b<this.parentNode.childNodes.length;b+=1)this.parentNode.childNodes[b].classList.remove("is-highlighted");d(this,"is-highlighted")},!1);g.listContainer.style.display=""}function d(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function e(a,b){if(0===a.length)return b.length;if(0===b.length)return a.length;var c,d=[];for(c=0;c<=b.length;c+=1)d[c]=[c];var e;for(e=0;e<=a.length;e+=1)d[0][e]=e;for(c=1;c<=b.length;c+=1)for(e=1;e<=a.length;e+=1)b.charAt(c-1)===a.charAt(e-1)?d[c][e]=d[c-1][e-1]:d[c][e]=Math.min(d[c-1][e-1]+1,Math.min(d[c][e-1]+1,d[c-1][e]+1));return d[b.length][a.length]}var f=!!document.querySelector&&!!window.addEventListener;if(f){var g=this;g.inputElement=a,g.options=b||{};var h,i,j={domains:["aol.com","facebook.com","gmail.com","googlemail.com","hotmail.com","hotmail.co.uk","icloud.com","live.com","me.com","mail.com","msn.com","outlook.com","yahoo.com","yahoo.co.uk","ymail.com"],priority:["gmail.com","icloud.com","hotmail.com","facebook.com","outlook.com","yahoo.com"]};for(i in j)j.hasOwnProperty(i)&&!g.options.hasOwnProperty(i)&&(g.options[i]=j[i]);if(("undefined"===g.inputElement||null===g.inputElement)&&(g.inputElement=document.querySelector("form input#email")),null===g.inputElement)return!1;g.listContainer=document.createElement("ul"),g.listContainer.style.display="none",g.listContainer.style.position="absolute",g.listContainer.id="asm-autolist",g.listContainer.className="asm-dropdown",g.inputElement.parentNode.insertBefore(g.listContainer,g.inputElement.nextSibling),g.inputElement.addEventListener("keydown",function(a){13===a.keyCode&&a.preventDefault()}),g.inputElement.addEventListener("keyup",function(a){if(13===a.keyCode){if(document.getElementsByClassName("is-highlighted")){a.preventDefault();var b=document.getElementsByClassName("is-highlighted")[0];g.inputElement.value=b.textContent,g.listContainer.style.display="none"}}else if(37===a.keyCode||39===a.keyCode||8===a.keyCode)g.listContainer.style.display="none";else if(40==a.keyCode||38==a.keyCode){var f;if("undefined"!=typeof document.getElementsByClassName("is-highlighted")&&(40==a.keyCode?f=document.getElementsByClassName("is-highlighted")[0].nextSibling:38==a.keyCode&&(f=document.getElementsByClassName("is-highlighted")[0].previousSibling)),f){for(h=0;h<f.parentNode.childNodes.length;h+=1)f.parentNode.childNodes[h].classList.remove("is-highlighted");d(f,"is-highlighted")}}else{for(var i=[],j=[];g.listContainer.firstChild;)g.listContainer.removeChild(g.listContainer.firstChild);g.listContainer.style.display="none";var k=g.inputElement.value.trim().split("@");if(k.length<2||""===k[0])return;var l=k[1];if(0===l.length)for(h=0;h<g.options.priority.length;h+=1)i.push(g.options.priority[h]);else{var m;for(h=0;h<g.options.domains.length;h+=1)m=g.options.domains[h].substr(0,l.length),l===m?i.push(g.options.domains[h]):e(l,m)<2&&l.length>1&&j.push(g.options.domains[h])}var n,o;if(i.length>0){for(h=0;h<i.length;h+=1)n=i[h].substr(l.length,i[h].length),o=document.createElement("li"),o.innerHTML=g.inputElement.value+"<strong>"+n+"</strong>",g.listContainer.appendChild(o);c()}else if(j.length>0){for(h=0;h<j.length;h+=1)n=j[h].substr(l.length,j[h].length),o=document.createElement("li"),o.innerHTML=k[0]+"@<strong>"+j[h]+"</strong>",g.listContainer.appendChild(o);c()}}},!1)}};